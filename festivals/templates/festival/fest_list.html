{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/css/navigation.css">
    <title>Document</title>
    <style>
      * {margin:0; padding: 0; box-sizing: border-box;}
      ul, li {list-style: none;}
      a {text-decoration: none; color: inherit;}

      #wrap {flex: 1;}

      #nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 30px;
        background-color: #f8f8f8;
        border-bottom: 1px solid #ddd;
        gap: 40px;
        height: 180px;
        flex-wrap: wrap;
      }

      #logo .logoBtn {
        font-size: 40px;
        font-weight: bold;
        background: none;
        cursor: pointer;
        padding: 10px 20px;
        border: none;
      }

      #pageMove ul {
        display: flex;
        gap: 20px;  
        flex-wrap: wrap;
      }

      #pageMove a {
        color: #333;
        font-weight: 500;
      }

      #pageMove a:hover {color: #007bff;}    
      .contents {
        max-width: 100%;
        margin: 32px auto;
        padding: 0 16px;
      }

      #banner_blur {
        height: 400px;
        border: 1px solid black;
                  
        justify-content: center;    
        align-items: center;       
        background: #f0f0f0;     
      }

      #banner_blur h1 {
        display: inline-block;
        width: 60%;
        margin: 6% 20% 1% 20%;
      }

      #searchBlocks {
        display: flex;
        margin: 0 auto;
        justify-content: space-between;
        align-items: stretch;
        background-color: #fff;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 10px;
        gap: 5px;
        width: 60%;
        height: 150px;
        
      }

      .searchBlock {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .region {
        width: 25%;
        
      }

      .date {
        width: 55%;
        justify-content: space-between;
      }

      .button {
        width: 10%;
        display: flex;
        justify-content: flex-start;
      }

      .searchBlock h3 {
        font-size: 16px;
        margin-bottom: 8px;
        color: #333;
        min-height: 22px;
      }

      .region input {
        margin-top: auto; /* inputì„ ì•„ë˜ë¡œ ë°€ê¸° */
      }

      .searchBlock input[type="text"],
      .searchBlock input[type="date"] {
        padding: 10px 12px;
        font-size: 15px;
        border: 1px solid #ccc;
        border-radius: 6px;
        height: 45px;
        width: 100%;

      }

      .date .stardToEnd {
        display: flex;
        width: 90%;
        align-items: center;
        gap: 10px;
      }

      .date .stardToEnd > div {
        flex: 1;
      }

      .date label {
        font-size: 13px;
        margin-bottom: 5px;
        display: block;
      }

      .button button {
        margin-top: auto;
        padding: 12px;
        font-size: 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      .button button:hover {
        background-color: #0056b3;
      }

      #festList {
        width: 60%;
        margin: 50px auto;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 40px;
        border-top: 1px solid #ccc;
        padding-top: 30px;
      }

      .festCard {
        width: 200px;
        height: 250px;
        border-radius: 5px;
        overflow: hidden;
        text-align: center;
        box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
        background-color: white;
      }

      #loadMoreBtn {
        display:block; 
        margin:10px auto 0; 
        padding:12px 32px; 
        font-size:1.1rem;  
        border:1px solid #ccc; 
        background:#f8f8f8; 
        cursor:pointer;
      }

      #footer {
        padding: 20px;
        background-color: #f1f1f1;
        font-size: 14.4px;
        color: #666;
        text-align: center;
      }

      .footer-links {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px;
        list-style: none;
        margin-top: 10px;
      }

      .footer-links a {
        text-decoration: none;
        color: #666;
      }

      .footer-links a:hover {text-decoration: underline;}

    </style>
</head>
<body>
    <div id="wrap">
        <div id="nav">
            <div id="logo"><button type="button" class="logoBtn" onclick="logoBtn()">logo_img</button></div>

            <div id="pageMove">
                <ul>
                <li><a href="#">ì¶•ì œì •ë³´</a></li>
                <li><a href="#">íšŒì›ê°€ì…</a></li>
                <li><a href="#">ë¡œê·¸ì¸</a></li>
                <li><a href="#">ê³ ê°ì„¼í„°</a></li>
                </ul>
            </div>
        </div>

        <div id="banner_blur">
            <h1>ì—¬í–‰ì§€ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”</h1>
            <form action="#" method="GET">
                <div id="searchBlocks">
                    <div class="searchBlock region">
                    <h3>ì§€ì—­ê²€ìƒ‰</h3>
                    <input type="text" name="region" id="region" placeholder="ì˜ˆ: ì„œìš¸, ë¶€ì‚°">
                    </div>

                    <div class="searchBlock date">
                    <h3>ë‚ ì§œê²€ìƒ‰</h3>
                    <div class="stardToEnd">
                        <div>
                        <label for="startDate">ì‹œì‘ì¼</label>
                        <input type="date" name="startDate" id="startDate">
                        </div>
                        <span>~</span>
                        <div>
                        <label for="endDate">ì¢…ë£Œì¼</label>
                        <input type="date" name="endDate" id="endDate">
                        </div>
                    </div>
                    </div>

                    <div class="searchBlock button">
                    <button type="submit"><a href="/festivals/resultlist/">ê²€ìƒ‰</a></button>
                    </div>
                </div>
            </form>
        </div>
            
        <div class="contents">  
            <div id="festList">
                
            </div>
            <button id="loadMoreBtn" >view more +</button>
        </div>
    </div>
    <script>
      // ğŸš¨ ì—¬ê¸°ì„œ 'safe' ëŒ€ì‹  'escapejs'ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤!
      // 'json_fest_data'ëŠ” ì´ë¯¸ JSON ë¬¸ìì—´ì´ë¯€ë¡œ, ì´ë¥¼ JavaScript ë¬¸ìì—´ ë¦¬í„°ëŸ´ ë‚´ì— ì•ˆì „í•˜ê²Œ ì‚½ì…í•˜ê¸° ìœ„í•´ 'escapejs'ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
      const allFestData = JSON.parse('{{ json_fest_data|escapejs }}');

      // ì´ì œ allFestDataëŠ” JavaScriptì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°°ì—´ì´ ë©ë‹ˆë‹¤.
      console.log(allFestData);

      // ì´í›„ JavaScript ë¡œì§ì€ ì´ì „ê³¼ ë™ì¼í•©ë‹ˆë‹¤.
      const festList = document.getElementById('festList');
      const loadMoreBtn = document.getElementById('loadMoreBtn');
      let loadedCount = 0;
      const LOAD_COUNT = 8; // ì´ˆê¸° ë¡œë“œ ê°œìˆ˜
      const LOAD_MORE_COUNT = 4; // 'ë”ë³´ê¸°' í´ë¦­ ì‹œ ì¶”ê°€ ë¡œë“œ ê°œìˆ˜

      function appendCards(dataArray, count) {
          for (let i = 0; i < count; i++) {
              if (loadedCount >= dataArray.length) {
                  if (loadMoreBtn) loadMoreBtn.style.display = 'none';
                  break;
              }
              const data = dataArray[loadedCount];
              const card = document.createElement('div');
              card.className = 'festCard';
              card.innerHTML = `<a href="/festivals/view/${data.id}">
                                    <img src="" alt="ì¶•ì œ${data.id}">
                                </a>
                                <p>${data.name}</p>`;
              festList.appendChild(card);
              loadedCount++;
          }
      }

      document.addEventListener('DOMContentLoaded', () => {
          appendCards(allFestData, LOAD_COUNT);
      });

      if (loadMoreBtn) {
          loadMoreBtn.addEventListener('click', () => {
              appendCards(allFestData, LOAD_MORE_COUNT);
          });
      }
    </script>

    <div id="footer">
      <h4>Â© 2025 FastFest | ì‚¬ì´íŠ¸ ê°œë°œì ì •ë³´</h4>
      <ul class="footer-links">
        <li><a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></li>
        <li><a href="#">ì´ìš©ì•½ê´€</a></li>
        <li><a href="#">ê´€ë¦¬ìí˜ì´ì§€ ì´ë™</a></li>
        <li>
          <div id="ldMode">
            <button type="button" class="ldBtn" onclick="ldBtn()">ë‹¤í¬ëª¨ë“œ</button>
          </div>
        </li>
      </ul>
    </div>
</body>
</html>