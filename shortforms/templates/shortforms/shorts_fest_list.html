<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>

    * {margin:0; padding: 0; box-sizing: border-box;}
    ul, li {list-style: none;}
    a {text-decoration: none; color: inherit;}

    #wrap {flex: 1;}

    #nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 30px;
      background-color: #f8f8f8;
      border-bottom: 1px solid #ddd;
      gap: 40px;
      height: 180px;
      flex-wrap: wrap;
    }

    #logo .logoBtn {
    font-size: 40px;
    font-weight: bold;
    background: none;
    cursor: pointer;
    padding: 10px 20px;
    border: none;
    }

    #pageMove ul {
    display: flex;
    gap: 20px;  
    flex-wrap: wrap;
    }

    #pageMove a {
    color: #333;
    font-weight: 500;
    }

    #pageMove a:hover {color: #007bff;}    
    .contents {
    max-width: 100%;
    margin: 32px auto;
    padding: 0 16px;
    }

   #banner_blur {
  height: 400px;
  border: 1px solid black;
            
  justify-content: center;    
  align-items: center;       
  background: #f0f0f0;     
}

#banner_blur h1 {
    font-size: 40px;
    display: inline-block;
    width: 50%;
    text-align: center;
}

.title-search-wrap {
  display: flex;
  width: 52%;
  height: 150px;
  margin: 0 auto;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 40px 20px 0 20px; /* 상단 여백만 약간 */
  flex-wrap: wrap; /* 화면 작을 때 줄바꿈 허용 */
}

#quickSearch {
  display: flex;
  gap: 8px;
  margin-top: 10px;
  
  
}

#quickSearch input {
  padding: 10px 12px;
  font-size: 15px;
  border: 1px solid #ccc;
  border-radius: 6px;
  width: 270px;
}

#quickSearch button {
  padding: 10px 16px;
  font-size: 15px;
  
  background: linear-gradient(90deg, #ffb300 0%, #4fc3f7 100%);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}


#searchBlocks {
  display: flex;
  margin: 0 auto;
  justify-content: space-between;
  align-items: stretch;
  background-color: #fff;
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 10px;
  gap: 5px;
  width: 50%;
  height: 150px;
  
}

  .searchBlock {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .searchBlock.tag select {
    padding: 10px 12px;
    font-size: 15px;
    border: 1px solid #ccc;
    border-radius: 6px;
    height: 45px;
    width: 100%;
    margin-top: 25px;
  }

  .searchBlock.tag { width: 18%; }

  .region { width: 18%; }

  .date { width: 46%; }

  .button { width: 8%; }

  .searchBlock h3 {
    font-size: 16px;
    margin-bottom: 8px;
    color: #333;
    min-height: 22px;
  }

  .region input {
    margin-top: auto; /* input을 아래로 밀기 */
    }

  .searchBlock input[type="text"],
  .searchBlock input[type="date"] {
    padding: 10px 12px;
    font-size: 15px;
    border: 1px solid #ccc;
    border-radius: 6px;
    height: 45px;
    width: 100%;

  }    

  .date .stardToEnd {
    display: flex;
    width: 90%;
    align-items: center;
    gap: 10px;
  }

  .date .stardToEnd > div {
    flex: 1;
  }

  .date label {
    font-size: 13px;
    margin-bottom: 5px;
    display: block;
  }

  #searchBtn {
    margin-top: auto;
    padding: 12px;
    font-size: 15px;
    background: linear-gradient(90deg, #ffb300 0%, #4fc3f7 100%);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  #resetBtn {
    width: 60%;
    height: 18px;
    margin: 0 auto;
    background-color: rgb(180, 7, 7);
    color: white;
    border: none;
    border-radius: 3px;
  }

  #resetBtn:hover {
    background-color: #0056b3;
  }

  #bannerList {
    width: 60%;
    margin: 0 auto;
    display: flex;
    border: 1px solid black;
    overflow: hidden;
    justify-content: space-evenly;
    flex-wrap: nowrap;
    gap: 20px;

  }

  .smallBanner {
    height: 200px;
    width: 300px;
    background-color: #e09e9e;
    border: 1px solid black;
    flex-shrink: 0;
  }


    #festList {
      width: 60%;
      margin: 50px auto;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
      /*border-top: 1px solid #ccc;*/
      padding-top: 30px;
    }

    .festCard {
      width: 200px;
      height: 250px;
      border-radius: 5px;
      overflow: hidden;
      text-align: center;
      box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
      background-color: white;
    }


    #footer {
    padding: 20px;
    background-color: #f1f1f1;
    font-size: 14.4px;
    color: #666;
    text-align: center;
    }

    .footer-links {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
    list-style: none;
    margin-top: 10px;
    }

    .footer-links a {
    text-decoration: none;
    color: #666;
    }

    .footer-links a:hover {text-decoration: underline;}

    </style>
</head>
<body>
    <div id="wrap">
        <div id="nav">
            <div id="logo"><button type="button" class="logoBtn" onclick="logoBtn()">logo_img</button></div>

            <div id="pageMove">
                <ul>
                <li><a href="#">축제정보</a></li>
                <li><a href="#">커뮤니티</a></li>
                <li><a href="#">회원가입</a></li>
                <li><a href="#">로그인</a></li>
                <li><a href="#">고객센터</a></li>
                </ul>
            </div>
        </div>

        <div id="banner_blur">
          <div class="title-search-wrap">
            <h1>등록할 쇼츠와 관련된 축제를 선택하세요.</h1>
            <div id="quickSearch">
              <input type="text" id="quickSearchInput" placeholder="빠른 검색어 입력">
              <button type="button" onclick="quickSearch()">검색</button>
            </div>
          </div>
            
              
              <div id="searchBlocks">
                <div class="searchBlock tag">
                <h3>태그검색</h3>
                <select id="tagSelect">
                  <option value="">태그 선택</option>
                  <option value="불꽃">불꽃</option>
                  <option value="음악">음악</option>
                  <option value="먹거리">먹거리</option>
                  <option value="전통">전통</option>
                  <option value="바다">바다</option>
                  <option value="눈">눈</option>
                </select>
              </div>
                    <div class="searchBlock region">
                    <h3>지역검색</h3>
                    <input type="text" name="region" id="region" placeholder="예: 서울, 부산">
                    </div>

                    <div class="searchBlock date">
                    <h3>날짜검색</h3>
                    <div class="stardToEnd">
                        <div>
                        <label for="startDate">시작일</label>
                        <input type="date" name="startDate" id="startDate">
                        </div>
                        <span>~</span>
                        <div>
                        <label for="endDate">종료일</label>
                        <input type="date" name="endDate" id="endDate">
                        </div>
                    </div>
                    </div>

                    <div class="searchBlock button">
                    <button type="button" id="resetBtn"onclick="resetFilter()">reset</button>
                    <button type="button" id="searchBtn" onclick="runDetailedSearch()">검색</button>
                    </div>
                </div>
            

        </div>
            

        <div class="contents"> 
          
            <div id="festList">
                <a href="#"><div class="festCard"><img src="" alt="축제1"><p>서울 불꽃축제</p></div></a>
                <a href="#"><div class="festCard"><img src="" alt="축제2"><p>부산 바다축제</p></div></a>
                <a href="#"><div class="festCard"><img src="" alt="축제3"><p>진주 남강유등축제</p></div></a>
                <a href="#"><div class="festCard"><img src="" alt="축제4"><p>화천 산천어축제</p></div></a>
                <a href="#"><div class="festCard"><img src="" alt="축제5"><p>안동 탈춤축제</p></div></a>
                <a href="#"><div class="festCard"><img src="" alt="축제6"><p>제주 들불축제</p></div></a>
                <a href="#"><div class="festCard"><img src="" alt="축제7"><p>대구 치맥페스티벌</p></div></a>
                <a href="#"><div class="festCard"><img src="" alt="축제8"><p>전주 한지문화축제</p></div></a>
            </div>
            
            
        </div> 

    </div>
    <script>
const festData = [
  { img: "", name: "서울 불꽃축제", tag: ["불꽃", "서울"], region: "서울", date: "2025-10-07" },
  { img: "", name: "부산 바다축제", tag: ["바다"], region: "부산", date: "2025-08-01" },
  { img: "", name: "진주 남강유등축제", tag: ["전통"], region: "진주", date: "2025-10-10" },
  { img: "", name: "화천 산천어축제", tag: ["눈"], region: "화천", date: "2025-01-10" },
  { img: "", name: "안동 탈춤축제", tag: ["전통"], region: "안동", date: "2025-09-27" },
  { img: "", name: "제주 들불축제", tag: ["불꽃"], region: "제주", date: "2025-03-08" },
  { img: "", name: "대구 치맥페스티벌", tag: ["먹거리"], region: "대구", date: "2025-07-17" },
  { img: "", name: "전주 한지문화축제", tag: ["전통"], region: "전주", date: "2025-05-05" },    
  { img: "", name: "춘천 마임축제", tag: ["음악", "야외"], region: "춘천", date: "2025-05-25" },
  { img: "", name: "광주 비엔날레", tag: ["음악"], region: "광주", date: "2025-09-06" },
  { img: "", name: "포항 불빛축제", tag: ["불꽃", "야경"], region: "포항", date: "2025-07-31" },
  { img: "", name: "여수 밤바다축제", tag: ["바다", "야경"], region: "여수", date: "2025-08-15" },
  { img: "", name: "울산 고래축제", tag: ["먹거리"], region: "울산", date: "2025-06-10" },
  { img: "", name: "인천 펜타포트", tag: ["음악"], region: "인천", date: "2025-08-09" },
  { img: "", name: "수원 화성문화제", tag: ["전통"], region: "수원", date: "2025-10-03" },
  { img: "", name: "청주 직지코리아", tag: ["전통"], region: "청주", date: "2025-09-01" }
];

const festList = document.getElementById('festList');

let loadedCount = 8;
const LOAD_COUNT = 4;

// 카드 렌더링 함수
function renderFestCards(dataArr, start = 0, end = loadedCount) {
  festList.innerHTML = "";
  dataArr.slice(0, end).forEach((data, idx) => {
    const tagsHtml = (data.tag || []).map(t => `<span class="tag">${t}</span>`).join(' ');
    const card = document.createElement('div');
    card.className = 'festCard';
    card.innerHTML = `
      <a href="#"><img src="${data.img}" alt="축제${idx+1}"></a>
      <p>${data.name}</p>
      <div>${tagsHtml}</div>
    `;
    festList.appendChild(card);
  });
  
}

// 페이지 로드 시 url 파라미터로 필터링
function filterFestByUrl() {
  const urlParams = new URLSearchParams(window.location.search);
  const tag = urlParams.get('tag');
  const keyword = urlParams.get('keyWord');

  let filtered = festData;

  // 태그 파라미터가 있으면 태그로 필터
  if (tag) {
    // 셀렉트에 옵션이 없으면 동적으로 추가
    const tagSelect = document.getElementById('tagSelect');
    let found = false;
    for (let i = 0; i < tagSelect.options.length; i++) {
      if (tagSelect.options[i].value === tag) {
        found = true;
        break;
      }
    }
    if (!found) {
      const opt = document.createElement('option');
      opt.value = tag;
      opt.textContent = tag + ' (외부)';
      tagSelect.appendChild(opt);
    }
    tagSelect.value = tag;
    filtered = filtered.filter(f => Array.isArray(f.tag) ? f.tag.includes(tag) : f.tag === tag);
  }

  // 키워드 파라미터가 있으면 키워드로 추가 필터
  if (keyword) {
    document.getElementById('quickSearchInput').value = keyword;
    filtered = filtered.filter(f =>
      f.name.includes(keyword) ||
      (f.region && f.region.includes(keyword)) ||
      (Array.isArray(f.tag) ? f.tag.some(t => t.includes(keyword)) : (f.tag && f.tag.includes(keyword)))
    );
  }

  renderFestCards(filtered);
  // 렌더링 후 리스트로 스크롤 및 포커스
  if (tag || keyword) {
    festList.scrollIntoView({ behavior: "smooth", block: "start" });
    festList.setAttribute('tabindex', '-1');
  }
}

// 페이지 최초 로딩 시 url 파라미터로만 필터링
window.addEventListener('DOMContentLoaded', function() {
  filterFestByUrl();
});

// 페이지 최초 로딩 시
renderFestCards(festData.slice(0, loadedCount));





// 빠른 검색
function quickSearch() {
  const keyword = document.getElementById('quickSearchInput').value.trim();
  if (!keyword) {
    renderFestCards(festData.slice(0, loadedCount));
    // URL 파라미터 제거
    history.replaceState(null, '', location.pathname);
    return;
  } 
  const filtered = festData.filter(f =>
    f.name.includes(keyword) ||
    (f.region && f.region.includes(keyword)) ||
    (Array.isArray(f.tag) ? f.tag.some(t => t.includes(keyword)) : (f.tag && f.tag.includes(keyword)))
  );
  renderFestCards(filtered);
  // 렌더링 후 리스트로 스크롤 및 포커스
  festList.scrollIntoView({ behavior: "smooth", block: "start" });
  festList.setAttribute('tabindex', '-1');
  // URL 파라미터 제거
  history.replaceState(null, '', location.pathname);
  
}

// 상세 검색
function runDetailedSearch() {
  const tag = document.getElementById('tagSelect').value;
  const region = document.getElementById('region').value.trim();
  const startDate = document.getElementById('startDate').value;
  const endDate = document.getElementById('endDate').value;

  let filtered = festData;

  if (tag) filtered = filtered.filter(f => Array.isArray(f.tag) ? f.tag.includes(tag) : f.tag === tag);
  if (region) filtered = filtered.filter(f => f.region.includes(region));
  if (startDate) filtered = filtered.filter(f => f.date >= startDate);
  if (endDate) filtered = filtered.filter(f => f.date <= endDate);

  renderFestCards(filtered);
  // 렌더링 후 리스트로 스크롤 및 포커스
  festList.scrollIntoView({ behavior: "smooth", block: "start" });
  festList.setAttribute('tabindex', '-1');
  // URL 파라미터 제거
  history.replaceState(null, '', location.pathname);
}

// 필터링 초기화
function resetFilter() {
  document.getElementById('tagSelect').value = '';
  document.getElementById('region').value = '';
  document.getElementById('startDate').value = '';
  document.getElementById('endDate').value = '';
  document.getElementById('quickSearchInput').value = '';

  renderFestCards(festData.slice(0, loadedCount))
  // URL 파라미터 제거
  history.replaceState(null, '', location.pathname);

}




</script>

    <div id="footer">
    <h4>© 2025 FastFest | 사이트 개발자 정보</h4>
    <ul class="footer-links">
      <li><a href="#">개인정보처리방침</a></li>
      <li><a href="#">이용약관</a></li>
      <li><a href="#">관리자페이지 이동</a></li>
      <li>
        <div id="ldMode">
          <button type="button" class="ldBtn" onclick="ldBtn()">다크모드</button>
        </div>
      </li>
    </ul>
  </div>
</body>
</html>